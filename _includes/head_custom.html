<script>
    document.addEventListener("DOMContentLoaded", function() {
        // 1. Create the button
        var btn = document.createElement("button");
        btn.innerHTML = "üåô"; // Moon icon for dark mode
        btn.id = "mode-toggle";
        btn.style.cssText = "background:none; border:none; cursor:pointer; font-size:1.2rem; margin-left:10px;";
        
        // 2. Append button to the header (Next to the search or title)
        var header = document.querySelector(".site-header");
        if(header){
            header.appendChild(btn);
        }

        // 3. Check LocalStorage for previous preference
        if (localStorage.getItem("theme") === "dark") {
            document.body.classList.add("dark-mode");
            btn.innerHTML = "‚òÄÔ∏è";
        }

        // 4. Add Click Event
        btn.addEventListener("click", function() {
            document.body.classList.toggle("dark-mode");
            
            if (document.body.classList.contains("dark-mode")) {
                localStorage.setItem("theme", "dark");
                btn.innerHTML = "‚òÄÔ∏è";
            } else {
                localStorage.setItem("theme", "light");
                btn.innerHTML = "üåô";
            }
        });
    });
</script>